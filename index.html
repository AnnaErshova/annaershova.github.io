
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Getting De-railed</title>
  <meta name="author" content="Anna Ershova">

  
  <meta name="description" content="Test-driven development has become quite a buzzword these days, with some companies produly announcing that they pursue it, some brushing it off as &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://annaershova.github.io">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Getting De-railed" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='https://fonts.googleapis.com/css?family=Noto+Serif:400,700' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-69356303-1']);
    _gaq.push(['_setDomainName','github.io']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Getting De-railed</a></h1>
  
    <h2>Anna's blog</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  
  
</ul>

<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/11/10/some-thoughts-on-test-driven-development/">Some Thoughts on Test-Driven Development</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-11-10T09:14:57-05:00" pubdate data-updated="true">Nov 10th, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>Test-driven development</em> has become quite a buzzword these days, with some companies produly announcing that they pursue it, some brushing it off as the latest coding fad, and some falling somewhere in between: writing and running some tests, but well after the code was actually written.</p>

<hr />

<p><strong>What does it Do?</strong></p>

<p>Technically, it means writing both code and automated tests for it simultaneously.</p>

<p>I like TDD for two main reasons:</p>

<ul>
<li><p>It forces you to think about your code and your product and be proactive about what could break.</p></li>
<li><p>It does tell you when something breaks &ndash; why would you not want to pursue that?</p></li>
<li><p>It helps you future-proof your code, especially if someone other than you might be using it. Seeing tests written for an app is a great way to understand how that app works.</p></li>
</ul>


<p>Rails comes with some <a href="http://guides.rubyonrails.org/testing.html">skeleton tests</a> that are designed when creating a new project or running a scaffold (run <strong><code>-T</code></strong> or <strong><code>--skip-test-unit</code></strong> to avoid having tests be created with <strong><code>rails new</code></strong>; run <strong><code>--no-test-framework</code></strong> when using a <a href="http://annaershova.github.io/blog/2015/10/18/generating-and-deleting-a-rails-scaffold/">generator</a>.) They are usually found in your <strong><code>test</code></strong> folder.</p>

<p>Interestingly, DHH, the man who created Rails, does not practice TDD at all and <a href="http://david.heinemeierhansson.com/2014/tdd-is-dead-long-live-testing.html">advocates in favor of live testing</a>.</p>

<p>While there are some good books on test-driven development on Amazon, there are a lot fewer of them than</p>

<p>I have been thinking of good ways to frame test-driven development.</p>

<p>Here are some things I have learned so far:</p>

<hr />

<p><strong>Write Tests First</strong></p>

<p>I think the tricky thing is to actually pursue <em>test-driven</em> development &ndash; as in, to let the tests drive your code, and not write tests after you finish coding. I am most certainly guilty of the latter. Pursuing the latter is actually still better than not writing any tests, but to me, having the tests drive what you are building implies a much better understanding of your code.</p>

<p>So that&rsquo;s the idea: write a test, write enough code for the test, repeat.</p>

<hr />

<p><strong>Red-Green-Refactor</strong></p>

<p>There are multiple approaches to writing tests. Red-green refactoring is what I really like: make the test fail (show up as red in your Terminal depending on the language you are running) before you make it turn green / pass. That way, you are actually ensuring you understand what your test is doing by breaking it and assembling it back together. Then refactor your code if it can use optimization, and repeat.</p>

<p>When writing tests that fail first is that the test is just an ideation of what your code is suppsoed to do, but the code is not there / ready yet, and your job is to make it pass.</p>

<hr />

<p><strong>Where Do I start?</strong></p>

<p>I have found it helpful to start with accessing what the code has to accomplish. Outside of the generic &lsquo;this app has to serve as a social network for ferrets&rsquo; mission, it helps to go through the basic ideas:</p>

<ul>
<li>What are specific things my code / app needs to go?</li>
<li>How should be able to manipulate my code / app?</li>
<li>What are inputs and outputs that go into the code?</li>
<li>What are the errors and some edge cases? (I always find I think of more edge cases and go back to add tests for them as I keep working on a project.)

<ul>
<li>With regard to errors, it is helpful to know some basic Ruby errors / exceptions so that you can speicficialyl test for them. Read more on exception handling <a href="http://ruby.bastardsbook.com/chapters/exception-handling/">here</a>.</li>
</ul>
</li>
</ul>


<p>Which brings me to:</p>

<hr />

<p><strong>How Do I run Tests?</strong></p>

<p><a href="https://github.com/rspec/rspec">RSpec</a> is one of the most popular Ruby gems.</p>

<p>Run <strong><code>rspec install</code></strong>, <strong><code>bundle</code></strong> and then <strong><code>rspec --init</code></strong>.</p>

<p>There are a lot more laws, principles, and tips on how to actually use rspec out there, and I plan to talk more about it in the future.</p>

<hr />

<p><strong>Extra Credit</strong></p>

<p>If you are looking for more detailed TDD steps, some good input can be found <a href="http://www.win.tue.nl/~wstomv/edu/2ip15/downloads/Series_02/test-driven-development.pdf">here</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/11/03/ruby-loop-with-a-twist/">Ruby Loop -- With a Twist</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-11-03T07:40:33-05:00" pubdate data-updated="true">Nov 3rd, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><hr />

<p><strong>Decrementing loop:</strong></p>

<p>Let&rsquo;s start with a siimple decrementing loop in ruby:</p>

<p><img class="center" src="/images/loop_1.png"></p>

<p>This produces all integers from 100 to 1, each on a separate line:</p>

<p><img class="center" src="/images/loop_1_output.png"></p>

<p>To produce a slightly more legible output that does not crown our terminal, use <strong><code>print</code></strong> instead of <strong><code>puts</code></strong></p>

<p><img class="center" src="/images/loop_2.png"></p>

<p>Output:</p>

<p><img class="center" src="/images/loop_2_output.png"></p>

<p>There is also a <strong><code>downto</code></strong> method:</p>

<p><img class="center" src="/images/loop_3.png"></p>

<p>My favorite &ndash; that I always conveniently forget about on the spot &ndash; is <strong><code>reverse_each</code></strong></p>

<p><img class="center" src="/images/loop_4.png"></p>

<p><strong><code>reverse_each</code></strong> is really a play on the regular  <strong><code>each</code></strong> method used with a range, with would iterate through a loop in ascending order:</p>

<p><img class="center" src="/images/loop_5.png"></p>

<p>To go a little bit fancier and with needless amount of work really, populate and array from a range and then iterate over it:
<img class="center" src="/images/loop_9.png"></p>

<p>Let&rsquo;s not forget the <strong><code>step</code></strong> method:</p>

<p><img class="center" src="/images/loop_4.png"></p>

<hr />

<p><strong>Decrementing | incrementing loop:</strong></p>

<p>What if the task is to have the <strong><code>x</code></strong> counting <em>down</em>, but to have the integers in the output counting up?</p>

<p>There is a very simple mathematical solution to the problem:</p>

<p><img class="center" src="/images/loop_6.png"></p>

<p>The result is exactly what we are looking for:</p>

<p><img class="center" src="/images/loop_6_output.png"></p>

<p>(Here I also added a newline so that it does not clash with terminal prompt.)</p>

<p>I thought of this when asked on the spot, but it&rsquo;s not exactly an elegant solution:</p>

<p><img class="center" src="/images/loop_7.png"></p>

<hr />

<p><strong>Incrementing counter | decrementing output:</strong></p>

<p>Easy and more or less creative solution using a previously populated array for a counter that goes up from 1 to 100 and for an output that goes down from 100 to 1:</p>

<p><img class="center" src="/images/loop_10.png"></p>

<p>Output:</p>

<p><img class="center" src="/images/loop_10_output.png"></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/10/26/variable-in-ruby/">Global Variables in Ruby</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-10-26T19:02:49-04:00" pubdate data-updated="true">Oct 26th, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><hr />

<p><strong>Variables in Ruby and Their Scope:</strong></p>

<p>There are four major kinds of variables in Ruby, like in most object-oriented languages:</p>

<ul>
<li><strong>Global</strong></li>
<li><strong>Local</strong></li>
<li><strong>Instance</strong></li>
<li><strong>Class</strong></li>
</ul>


<p>There are also special variables such as <strong><code>self</code></strong> or <strong><code>nil</code></strong>, and of course, one can classify constants as a kind of a variable.</p>

<p>In this post, I want to talk about global variables, which, as the name implies, are stored globally and have global implications.</p>

<p>All variables in Ruby outside of locals ones are indicated with a sigil (a prefix that denotes variable scope): <strong><code>@</code></strong> for instance variables, <strong><code>@@</code></strong> for class variables, and <strong><code>$</code></strong> for global variables.</p>

<p>Since Ruby is a dynamically typed language, interpreter will determine data type of each and every variable when it is being assigned; there is no need to define each variable&rsquo;s data type when introducing it (so no need to type keyword <strong><code>global</code></strong> like in PHP).</p>

<p>If you specify a global variable, but not initialize it, it will return a <strong><code>nil</code></strong> pseudo-variable:</p>

<p><img class="center" src="/images/global_var_assignment.png"></p>

<hr />

<p><strong>The Problem with Using Global variables:</strong></p>

<p>Global variables are incredibly easy to use (<em>I see sooo many games of Tic Tac Toe with global variables written by Ruby beginners</em>), but also quite easy to abuse as they cane be accessed from within anywhere in your code even though the code refers to two separate classes:</p>

<p><img class="center" src="/images/global_variable_ill.png"></p>

<p>Global variables violate the principle of <a href="https://en.wikipedia.org/wiki/Encapsulation_(computer_programming">encapsulation</a>) by allowing one part of your code to modify another part of your code without an explicitly defined interface. Over-using them probably means that app was not thoroughly thought out.</p>

<hr />

<p><strong>When to Use Global variables: Pre-defined Global Variables</strong></p>

<p>Even though global variables are generally considered to be un-Ruby-esque, Ruby does include a number of useful global variables (largely a Perl legacy) with a  <strong><code>$</code></strong> followed by a single character or a word that have a pre-defined meaning.</p>

<p>Below is just a selection of those, see a full list in <a href="http://ruby-doc.org/core-2.0.0/doc/globals_rdoc.html">Ruby docs</a> or by running <strong><code>$global_variables</code></strong>:</p>

<p><img class="center" src="/images/global_variables.png"></p>

<p>Similarily, you can run  <strong><code>self.instance_variables</code></strong> on an class instance, or  <strong><code>Class.class_variables</code></strong> on a class.)</p>

<ul>
<li><strong><code>$0</code></strong> &ndash; contains the name of the script being executed. Is assignable.</li>
</ul>


<p><img class="center" src="/images/$0.png"></p>

<ul>
<li><strong><code>$0</code></strong> &ndash; current line number of last line from input.</li>
</ul>


<p><img class="center" src="/images/$dot.png"></p>

<ul>
<li><strong><code>$:</code></strong> &ndash; same as <strong><code>$LOAD_PATH</code></strong>, shows load path:</li>
</ul>


<p><img class="center" src="/images/load_path.png"></p>

<ul>
<li><strong><code>$$</code></strong> &ndash; shows process ID (PID) of current script:</li>
</ul>


<p><img class="center" src="/images/pid.png"></p>

<hr />

<p><strong>Pre-defined Global Variables vs. Global Constants:</strong></p>

<p>Constants are an opposite of variables, but since Ruby has a number of global constants, I thought it would be good to briefly mention them as well.</p>

<p>The most commonly used global constants are <strong><code>ENV</code></strong> and <strong><code>ARGV</code></strong>.</p>

<ul>
<li><strong><code>ENV</code></strong> gives access to environmental variables in a Ruby hash with variables as a hash key.</li>
</ul>


<p><img class="center" src="/images/ENV.png"></p>

<ul>
<li><strong><code>ARGV</code></strong> gives access to command-line argument values as strings in a Ruby array. It is also aliased as <strong><code>$*</code></strong>.</li>
</ul>


<hr />

<p><strong>Tracing Global Variables:</strong></p>

<p>Check out this RosettaCode screenshot <a href="http://rosettacode.org/wiki/99_Bottles_of_Beer#Ruby">example</a> for the classic 99 Bottles of Beer coding exercise:</p>

<p><img class="center" src="/images/rosetta_code_var_trace.png"></p>

<p>The <a href="http://ruby-doc.org/core-2.2.1/Kernel.html#method-i-trace_var">docs</a> say this re: <strong><code>trace_var</code></strong>:</p>

<blockquote><p>Controls tracing of assignments to global variables. The parameter symbol identifies the variable (as either a string name or a symbol identifier). cmd (which may be a string or a Proc object) or block is executed whenever the variable is assigned. The block or Proc object receives the variable&rsquo;s new value as a parameter. Also see Kernel::untrace_var.</p></blockquote>

<p>This is the example that the Docs use:</p>

<p><img class="center" src="/images/tracing_docs_ex.png"></p>

<p>As you can see, one can pass a symbol that names a variable and a block of code or a string to the method. When the value of the variable changes, the block of code will evaluated or the string will be invoked (see more in <a href="http://www.amazon.com/Ruby-Programming-Language-David-Flanagan/dp/0596516177/ref=sr_1_1?s=books&amp;ie=UTF8&amp;qid=1445989282&amp;sr=1-1&amp;keywords=9780596554651">The Ruby Programming Language</a>, 2008, p. 280)</p>

<p>Which means:</p>

<p><img class="center" src="/images/global_var_tracing.png"></p>

<p>And this is exactly how the 99 Bottles of Beer example works!</p>

<p>To stop tracing the variable, use <strong><code>untrace_var</code></strong> just like Ruby docs above specified.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/10/26/basics-of-speeding-up-rails-app/">Basics of Speeding Up Rails App</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-10-26T18:06:22-04:00" pubdate data-updated="true">Oct 26th, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This is a 101 post, and I am planning on touching more on the topics below in greater details.</p>

<hr />

<p>There are three main ways to make Rails apps faster:</p>

<ul>
<li>Code optimization</li>
<li>Scaling</li>
<li>Caching</li>
</ul>


<hr />

<p><strong>Scaling:</strong></p>

<p>Scaling generally refers to making sure an app remains fast when number of users grows quickly.</p>

<p>So you are a startup that built an app that uses Ruby and Ruby-on-Rails. You did not particularily optimize anything because you just wanted that sweet venture capital for your prototype &ndash; or maybe you did not know what you are doing. Then your startup hit it bit despite the odds, and now you have thousands of users coming to use the app everyday. And that&rsquo;s when things slow down.</p>

<p>Pure Ruby is rather slow, compared to, say C, but there are still ways to make things work efficiently, and I will talk about these.</p>

<p>Heroku scales things for you if that is your deployment tool of choice. Other hosting services tend to have similar solutions.</p>

<hr />

<p><strong>Caching:</strong></p>

<hr />

<p><strong>Code optimization:</strong></p>

<p>This is the most realiable way to make</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/10/26/what-about-localhost-3000/">What About Localhost:3000?</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-10-26T12:10:56-04:00" pubdate data-updated="true">Oct 26th, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Most people new to rails go through some sort of &lsquo;make-an-app-in-under-15-minutes&rsquo; tutorial, which always includes instructions to run <strong><code>rails s</code></strong> or  <strong><code>rails server</code></strong> to get a preview of your app.</p>

<p>Typing it into a console usually produces something like this:</p>

<p><img class="center" src="/images/railss.png"></p>

<p>That means that a Rails server is now listening on port 3000.</p>

<p>And when you point your browser to <strong><code>localhost:3000</code></strong> (or alternatively <strong><code>http://127.0.0.1:3000/</code></strong>, where <strong><code>http://127.0.0.1</code></strong> is your computer&rsquo;s loopback address), you see the standard Welcome Aboard message:</p>

<p><img class="center" src="/images/localhost_screenshot.png"></p>

<p>Of course that is the case where the app is either blank (so that going to leads to a blank website or no root page has been set up) so that when you click on <a href="http://localhost:3000/rails/info">http://localhost:3000/rails/info</a> with server running, you see this:</p>

<p><img class="center" src="/images/rails_info_routes.png"></p>

<p>(note that it only works for development environment; once your app is deployed, say, <strong><code>my-app.herokuapps.com/rails/info</code></strong> won&rsquo;t work unless you have built that route and populated it.)</p>

<p>In fact, <strong><code>localhost:3000</code></strong> is so common that someone registered a <a href="http://www.localhost3000.org/">website</a> that takes you to a website that reminds you you forgot to start your server, if that is indeed the case.</p>

<p>Note that when using Chrome, you can just type in <strong><code>localhost:3000</code></strong>, but for Internet Explorer, you would need to point your browser to <strong><code>http://localhost:3000</code></strong>, otherwise, you will see an error message.</p>

<p>Once your app has a model or two and corresponding migrations have been run, you will be able to point your browser to, say <strong><code>localhost:3000/users</code></strong> if a User model is present.</p>

<hr />

<p><strong>Why 3000?</strong></p>

<p>I haven&rsquo;t been able to find a comprehensive answer to why Rails uses port 3000 vs. any other port. Octopress uses 4000; Sinatra uses 4567; shotgun uses 9393. Meteor also uses 3000 as a development default. There is a <a href="https://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers">fairly comprehensive list</a> on Wikipedia.</p>

<hr />

<p><strong>What if I want to use another port?</strong></p>

<p>To switch port to, say, 80, run this:</p>

<p><strong><code>rails server -p 80</code></strong></p>

<p>You might need to prepend it with <strong><code>bundle exec</code></strong>.</p>

<p>You can use an alias if you plan on often changing your default development port: <strong><code>alias rails-server-port='rails server -p 80'</code></strong> (using <strong><code>nano .bash-profile</code></strong>)</p>

<p>See documentation on it <a href="https://github.com/rails/rails/blob/4-2-stable/railties/lib/rails/commands/server.rb">here</a> as I could not find any actual description in Terminal:</p>

<p><img class="center" src="/images/rails_server_docs.png"></p>

<p><strong><code>rails s</code></strong> will run as development, not production, by default. To change port for a different environment, run something like:</p>

<p><strong><code>rails server -e production -p 4000</code></strong></p>

<hr />
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/10/26/some-ruby-slash-rails-slash-general-coding-resources/">Some Ruby / Rails / General Coding Resources</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-10-26T09:01:07-04:00" pubdate data-updated="true">Oct 26th, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I keep getting asked what my favorite coding resources are, Rails or otherwise, so this is an attempt at keeping a running list, in no particular order. I fully intend to come back and edit this post as I stumbple upon new resources.</p>

<p>There are a lot of really great blogs from people writing Rails, and sometimes when googling something, I see amazingly written posts on fairly esoteric subjects. The resources below tend to be consistently good and conventional &ndash; and enough to keep new developers occupied for a long, long time.</p>

<hr />

<p><strong>Rails newsletters:</strong></p>

<ul>
<li><p><a href="http://rubyweekly.com/">Ruby Weekly</a> &ndash; one email every Thursday.</p></li>
<li><p><a href="http://greenruby.org/">Green Ruby</a> &ndash; one email every Sunday.</p></li>
</ul>


<p>They have a lot of overlap, but since they come out on different days, sometimes it&rsquo;s nice to see a reminder that I meant to read an article or explore a new gem.</p>

<hr />

<p><strong>Resources:</strong></p>

<ul>
<li><p><a href="https://practicingruby.com/">Practicing Ruby</a> &ndash; well worth the $8/month they suggest paying.</p></li>
<li><p><a href="http://www.rubytapas.com/">Ruby Tapas</a> &ndash; also well worth the $9/month subscription fee.</p></li>
<li><p><a href="https://devchat.tv/ruby-rogues/">Ruby Rogues</a></p></li>
<li><p><a href="http://railscasts.com/">http://railscasts.com/</a> &ndash; amazing, well worth the subscription fee, although older poscasts are all free.</p></li>
</ul>


<hr />

<p><strong>General Resources:</strong></p>

<ul>
<li><p><a href="http://codercareer.blogspot.com/">CoderCareer</a> &ndash; not Ruby/Rails-specific, but lots of cool content discussing coding interview questions and how to answer them. Gets updated very rarely though.</p></li>
<li><p><a href="https://www.igvita.com/">Ignita</a> &ndash; also rarely updated, also lots of cool content.</p></li>
<li><p><a href="(http://adam.herokuapp.com/">A Tornado of Razorblades</a> by Adam Wiggins, a founder of Heroku.  &ndash; also rarely updated, also pretty cool.</p></li>
</ul>


<hr />

<p><strong>Blogs:</strong></p>

<ul>
<li><p><a href="https://www.justinweiss.com/articles/archives/">Justin Weiss</a>. Updated less often than many people would like, but still an amazing read.</p></li>
<li><p><a href="https://robots.thoughtbot.com/tags/rails">Thoughtbot</a> blog. Those are the guys behind <a href="https://github.com/thoughtbot/factory_girl">FactoryGirl</a> and <a href="https://github.com/thoughtbot/paperclip">Paperclip</a> and many, many other projects. Enough said.</p></li>
<li><p><a href="http://weblog.rubyonrails.org/">Official Rails Weblog</a> &ndash; great way to get a gist on what is happening in Rails.</p></li>
<li><p><a href="https://www.reddit.com/r/rails">Ruby on Rails subreddit</a> &ndash; not the best daily read, and it&rsquo;s too easy to get distracted by the cat memes in other subreddits, but cool to check out once in a while.</p></li>
<li><p><a href="http://www.rubyflow.com/">RubyFlow</a> &ndash; community-sourced. Content varies from &ldquo;what&rsquo;s new in Rails 5&rdquo; to discussing very technical subjects.</p></li>
<li><p><a href="http://www.rubyinside.com/">RubyInside</a> &ndash; archive of some cool reads.</p></li>
<li><p><a href="http://blog.arkency.com/">Blog by Arkency</a>, a dev shop. These guys know what they are talking about.</p></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/10/25/csrf-part-ii-csrf-vs-xss/">CSRF Part II -- CSRF vs. XSS</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-10-25T18:03:57-04:00" pubdate data-updated="true">Oct 25th, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I touched upon CSRF (cross-site request forgery) in my <a href="http://annaershova.github.io/blog/2015/10/25/whats-csrf-and-what-exactly-are-we-are-protecting-from-forgery-in-controllers/">previous blog post</a>, but as I was mentionining that it is distinct from XSS since the two get mixed up sometimes (must be the multi-fricative-consonant abbreviation), I realized that I should discuss it in greater detail.</p>

<hr />

<p><strong>Web Attack Types Vulnerabilities: Gotta Catch &lsquo;Em All</strong></p>

<p>Both XSS abd CSRF are types of web attacks (there are more than these two, but I have seen people get them confused, and they do have interesting parallels). XSS is <em>cross-site scripting</em>. CSRF, as previously mentioned, is <em>cross-side request forgery</em>.</p>

<p><strong>The fundamental conceptual difference between CSRF and XSS is that CSRF exploits a website&rsquo;s trust (authentication) of a user, whereas XSS exploits a user&rsquo;s trust for a website.</strong></p>

<hr />

<p><strong>XSS: The Mechanics</strong></p>

<p>XSS involves injecting malicious scripts (in the case of Rails, it would usually be JavaScript, potentially combined with HTML, often with a <strong><code>&lt;script&gt;</code></strong> tag) into a webpage. That script can be then executed when other users access the website.</p>

<p>For instance, a hacker introduces some JavaScript to the comments section of a webpage, and when other users try to access it, the script is executed and, say, the user is re-directed to a porn website they otherwise from their original destination S.H.I.E.L.D. subreddit.</p>

<p>XSS attacks are incredibly common and easy to execute if a website does not have appropriate security features.</p>

<hr />

<p><strong>XSS and Ruby on Rails: Opting Out of HTML Escape</strong></p>

<p>As with CSRF, Rails comes with a reasonably strong protection against XSS attacks. That certainly makes life easier for most beginners who want to have a reasonably secure website without spending too much time researching security and focusing on building other skills first.</p>

<p>The idea behind Rails XSS protection is automatically sanitizing user input so that nothing gets executed as a script if it&rsquo;s not meant to be. Back in the day, that had to be done manually, which, was extremely time-consuming and error-prone. So Rails 3 incorporated a simple idea: opting out of html escaping instead of opting in, if need be.</p>

<p>It accomplished that by integrating <strong><code>RailsXss</code></strong> <a href="https://github.com/rails/rails_xss">plugin</a>, and the feature <a href="https://github.com/rails/rails/commit/9415935902f120a9bac0bfce7129725a0db38ed3">became part of Edge Rails</a> as early as <a href="http://weblog.rubyonrails.org/2009/10/12/what-s-new-in-edge-rails/">October 2009</a> (see more on Edge Rails in my post <a href="http://annaershova.github.io/blog/2015/10/11/running-edge-rails-living-dangerously/">here</a> ).</p>

<p>Rails 3+ officially supports this feature, and it backports to earlier versions of Rails as well.</p>

<p>I noticed from reading <a href="https://github.com/rails/rails/blob/4-2-stable/activesupport/lib/active_support/core_ext/string/output_safety.rb">source code</a> that Rails now assumes that no string input is <strong><code>html_safe?</code></strong> by default, while integers are:</p>

<p><img class="center" src="/images/object_vs_numeric.png"></p>

<p>This is what it looks like in Rails console:</p>

<p><img class="center" src="/images/html_safe_int.png"></p>

<p>Html escape it can be still done manually with an <a href="http://api.rubyonrails.org/classes/ERB/Util.html#method-c-html_escape"><strong><code>html_escape</code></strong></a> in front of whatever you are rendering within the erb tags.</p>

<p><strong><code>html_escape</code></strong> can be also aliased as <strong><code>h</code></strong>, and it is fine to use it even if something is getting html escaped by default as Rails will recognize it as such and will only escape it once.</p>

<p>See example from <a href="https://github.com/rails/rails/blob/4-2-stable/activesupport/lib/active_support/core_ext/string/output_safety.rb">source code</a>:</p>

<p><img class="center" src="/images/html_escape.png"></p>

<p>The potentially &lsquo;dangerous&rsquo; charactaters are converted into their human-readable equivalents as the same source code indicates:</p>

<p><strong><code>HTML_ESCAPE = { '&amp;' =&gt; '&amp;amp;',  '&gt;' =&gt; '&amp;gt;',   '&lt;' =&gt; '&amp;lt;', '"' =&gt; '&amp;quot;', "'" =&gt; '&amp;#39;' }</code></strong></p>

<p>Similarily, <a href="https://github.com/rails/rails/blob/4-2-stable/activesupport/lib/active_support/core_ext/string/output_safety.rb"><strong><code>html_escape_once</code></strong></a> escapes HTML code without affecting existing escaped code:</p>

<p><img class="center" src="/images/escape_once.png"></p>

<p>If you do not want user input to be sanitized, then using <strong><code>raw</code></strong> in the erb template is the way to go, e.g.:</p>

<p><img class="center" src="/images/rawxss.png"></p>

<hr />

<p><strong>If That Were Not Enough</strong></p>

<p><a href="https://en.wikipedia.org/wiki/Cross-site_scripting">Wikipedia article</a> is a good starting point.</p>

<p>This <a href="http://railscasts.com/episodes/204-xss-protection-in-rails-3?autoplay=true">Railscast episode</a> is worth spending 8 minutes on, even though it is a bit older.</p>

<p>And as usual, more on XSS on the <a href="http://guides.rubyonrails.org/security.html#cross-site-scripting-xss">Rails Guides</a> website.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/10/25/whats-csrf-and-what-exactly-are-we-are-protecting-from-forgery-in-controllers/">What's CSRF and What Exactly Are We Are Protecting From Forgery?</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-10-25T14:53:44-04:00" pubdate data-updated="true">Oct 25th, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Running any <strong><code>Rails new</code></strong> command will produce a <strong><code>ApplicationDirectory/app/controllers/application_controller.rb</code></strong> file that looks like this initially:</p>

<p><img class="center" src="/images/application_controller_csrf.png"></p>

<p>Since Rails is so beginner-friendly, many new developers are too preoccupied with making an app that works (<em>why do my routes look like that?!</em>) than looking into each and every line of generated code. I find that the CSRF-related line of code in a standard <strong><code>ApplicationController</code></strong> is particularily often overlooked. I wanted to discuss it here as it is connected a serious security issue often encountered on the web.</p>

<p>The Ruby on Rails API has a comprehensive <a href="http://api.rubyonrails.org/classes/ActionController/RequestForgeryProtection/ClassMethods.html">guide</a> explaining what <strong><code>protect_from_forgery</code></strong> does. It still assumes a basic understanding of CSRF.</p>

<p>CSRF, just like XSS, which will be discussed in the next post, is not a Rails-specific problem, and it really affects all computer systems and all languages, although this post will discuss in the context of Rails.</p>

<hr />

<p><strong>How CSRF Works</strong></p>

<p>CSRF (sometimes spelled as XSRF) stands for <em>cross-side request forgery</em>. It is, according to <a href="https://en.wikipedia.org/wiki/Cross-site_request_forgery">Wikipedia</a>, sometimes pronounced as <em>see-surf</em> (which I absolutely did not know prior to reading the Wiki article). However it is pronounced, it involves an attacker submitting malicious commands to an app that appear to come from a user that the app has authorized and that the browser trusts. The hacker can therefore gain control of an account.</p>

<p>CSRF is sometimes refered to as &lsquo;session riding,&rsquo; a pretty accurate description as you&rsquo;ll see.</p>

<p>Note that this is different from XSS (cross-site scripting).</p>

<p>Most Rails apps use cookie-based sessions. If an attacker can find a link s/he can reproduce (<em>forge</em>) that involves executing something on a target page while a user is logged in, they can then embed such a link &ndash; with a malicious action &ndash; on a page where a user can click it, thus giving an attacker control of the account.</p>

<p>It is not uncommon for websites to be vulnerable to CSRF attacks. At various times, some major websites such as YouTube, The New York Times and INGDirect <a href="http://www.darkreading.com/risk/csrf-flaws-found-on-major-websites/d/d-id/1129743">famously</a> all had that issue.</p>

<p>In INGDirect case, hackers could gain control of users' accounts and transfer money out to an account that was open in user&rsquo;s name but was not actually associated with them. In YouTube&rsquo;s case, hackers could friend other users on behalf of a hacked user, add videos to the user&rsquo;s favorites, and send messages on a user&rsquo;s behalf.</p>

<p>A web developer generally needs to explicitly protect their app from CSRF attacks, and thankfully, Rails does it for us with default code. (Other languages often have plugins etc to help handle this issue, but Rails, as usual, makes things much easier.)</p>

<hr />

<p><strong>What Is Protect_From_Forgery?</strong></p>

<p>According to to the <a href="https://github.com/rails/rails/blob/0450642c27af3af35b449208b21695fd55c30f90/actionpack/lib/action_controller/metal/request_forgery_protection.rb">Rails source</a>:</p>

<blockquote><p>Controller actions are protected from Cross-Site Request Forgery (CSRF) attacks by including a token in the rendered HTML for your application. This token is stored as a random string in the session, to which an attacker does not have access. When a request reaches your application, Rails verifies the received token with the token in the session. All requests are checked except GET requests as these should be idempotent. Keep in mind that all session-oriented requests should be CSRF protected, including JavaScript and HTML requests.</p></blockquote>

<p>That means that your app will protected against CSRF attacks with one line in your Application Controller: <strong><code>protect_from_forgery with: :exception</code></strong>.</p>

<hr />

<p><strong>How Is Protection Executed?</strong></p>

<p>General principle of CSRF protection is introducing user-specific secret data into the request that would not be accessible by a hacker. That is exactly how Rails does it. It protects your session via a <strong><code>:null_session method</code></strong>: an empty session is generated during a request.</p>

<p>It requires that a special CSRF token is present before any <strong><code>POST</code></strong>, <strong><code>PUT</code></strong> or <strong><code>DELETE</code></strong> request is accepted. That token will be included as a hidden field when using Rails forms builders. (Most browsers only support <strong><code>GET</code></strong> or <strong><code>PUT</code></strong> instead of all the proper RESTful verbs, but we know that Rails uses a hidden field <strong><code>_method</code></strong> to fix it.)</p>

<p><strong><code>GET</code></strong> requests are not protected since they don&rsquo;t have potential to leak sensitive data. That is why it is important to use <strong><code>GET</code></strong> requests appropriately in cases when a database is read or queried etc, but a user&rsquo;s state in the app is not modified.</p>

<p>The required security token in question is known as <strong><code>authenticity_token</code></strong>. That token is known to its app, but not to others. To achieve that, its name and value must be added to every view that renders forms by adding <strong><code>csrf_meta_tags</code></strong> within html <strong><code>head</code></strong> tags. That is also a default option generated when using a <strong><code>Rails new</code></strong> command and places into a <strong><code>ApplicationDirectory/app/views/layouts/application.html.erb</code></strong> file, which is normally the only view file generated for a model-less app:</p>

<p><img class="center" src="/images/applicationhtmlerb.png"></p>

<p>It&rsquo;s interesting to see the <a href="https://github.com/rails/rails/blob/4-2-stable/railties/lib/rails/generators/rails/app/templates/app/views/layouts/application.html.erb.tt">source code</a> for this in the Rails repo:</p>

<p><img class="center" src="/images/applicationhtmlerblayout.png"></p>

<p>Is a CSRF token does not match, Rails will raise an <strong><code>InvalidAuthenticityToken</code></strong>.</p>

<hr />

<p><strong>What if I am running tests?</strong></p>

<p>To disactivate this feature for the test environment:</p>

<p><strong><code>protect_from_forgery unless Rails.env.test?</code></strong></p>

<hr />

<p><strong>What If I am Building an API?</strong></p>

<p>Since XML or JSON formats are also affected by this code, default forgery protection should be turned off if you are building an API as the API is designed to be stateless: <strong><code>protect_from_forgery unless: -&gt; { request.format.json? }</code></strong></p>

<p>There is more information on the <a href="http://guides.rubyonrails.org/security.html">Rails Security Guides</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/10/20/mastering-your-terminal-part-iii/">Mastering Your Terminal -- Part III</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-10-20T23:24:26-04:00" pubdate data-updated="true">Oct 20th, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><strong>Shutting Down Your Mac From Your Terminal:</strong></p>

<p><strong><code>sudo shutdown -r now</code></strong></p>

<p><strong><code>shutdown</code></strong> is the command you need.</p>

<p>Pass in the following options:</p>

<ul>
<li><strong><code>-h</code></strong> &ndash; halt the session, re-starts the system</li>
<li><strong><code>-s</code></strong> &ndash; sleep</li>
<li><strong><code>-r</code></strong> &ndash; re-boot the system</li>
<li><strong><code>-k</code></strong> &ndash; kick everyone off but the super-user</li>
</ul>


<p>And as for time options:</p>

<ul>
<li><strong><code>now</code></strong> &ndash; execute command immediately</li>
<li><strong><code>+integer</code></strong> &ndash; execute command in x minutes (e.g., <strong><code>+10</code></strong> is in 10 minutes)</li>
<li><strong><code>yymmddhhmm</code></strong> &ndash; execute command on a given time and date</li>
</ul>


<p>If you schedule a <strong><code>shutdown</code></strong> command, but decide to hold off of it, <strong><code>sudo shutdown -c</code></strong> will cancel it.</p>

<p>In my understanding, <strong><code>sudo shutdown -r now</code></strong> is a functional equivalent of <strong><code>sudo reboot</code></strong></p>

<p>All those commands can be followed by a message that can be seen by other users who are logged in, for instance, <strong><code>sudo shutdown -r now 'Re-starting Now'</code></strong>.</p>

<hr />

<p><strong>Changing What Your Power Button Does:</strong></p>

<p>In the OS X prior to the 10.9 Maverick, a power button used to bring up a <strong><code>Restart</code></strong>, <strong><code>Sleep</code></strong>, <strong><code>Cancel</code></strong>, and <strong><code>Shut Down</code></strong> options.</p>

<p>In later OS X versions, pressing it just puts your machine to sleep. If you want to have it bring up an earlier options menu, run this:</p>

<p><strong><code>defaults write com.apple.loginwindow PowerButtonSleepsSystem -bool FALSE</code></strong></p>

<p>Pressing the power button will then bring up this dialog:</p>

<p><img class="center" src="/images/powerbuttondialog.png"></p>

<p>If you want to switch back to the sleep-only option, run the same command with <strong><code>TRUE</code></strong> instead of <strong><code>FALSE</code></strong>.</p>

<hr />

<p><strong>Having Your System Restart Automatically If It Freezes:</strong></p>

<p>While Macs tend to have relatively good uptimes (see <a href="http://annaershova.github.io/blog/2015/10/12/mac-uptime-and-reboot-stats/">here</a> for more info what that is and how to find it out), OS X can still freeze up. Most users press the power button for a couple of seconds to have it turn off, and then press it again to turn it back on. That generally works well, but you can also type this in your Terminal to have its equivalent happen automatically:</p>

<p><strong><code>sudo systemsetup -setrestartfreeze on</code></strong></p>

<p>(It&rsquo;s also useful if you are not there physically to press the restart button, for instance, if your Mac acts as a server.)</p>

<p>To disable this option, run the same command with <strong><code>OFF</code></strong> instead of <strong><code>ON</code></strong>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/10/19/mastering-your-terminal-part-ii/">Mastering Your Terminal -- Part II</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-10-19T23:24:32-04:00" pubdate data-updated="true">Oct 19th, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><strong>Finding your way around: </strong><code>find</code><strong>, </strong><code>mdfind</code><strong>, and </strong><code>locate</code><strong> </strong></p>

<hr />

<p><strong><code>find</code></strong></p>

<ul>
<li><strong><code>find</code></strong> &ldquo;walks a file hierarchy.&rdquo; You can always search for files using Spotlight, but it is' easy on your Terminal as well.</li>
<li><strong><code>find path/to/search -name name_to_search_for</code></strong> to search for a specific file name</li>
<li><strong><code>find / -name name_to_search_for</code></strong> to search your entire computer</li>
<li><strong><code>find ~ -name name_to_search_for</code></strong> to search your user directory</li>
<li><strong><code>find path/to/search -iname name_to_search_for</code></strong> &ndash; add the <strong><code>-i</code></strong> flag to do a case-insensitive match.</li>
<li><strong><code>find path/to/search -size name_to_search_for</code></strong> to search for a specific file size</li>
<li><strong><code>find path/to/search -type name_to_search_for</code></strong> to search for a specific file type</li>
</ul>


<p>As usual, there are many other search options that running <strong><code>man</code></strong> find will showcase, and they can be stacked together to filter results.</p>

<hr />

<p><strong><code>mdfind</code></strong></p>

<ul>
<li><strong><code>mdfind query</code></strong> &ldquo;finds files matching a given query&rdquo; as per its manual. It uses metadata to search for queries, so it is basically a shell for your Spotlight search. Metadata, or data about data itself, is at the core of Spotlight &ndash; that is how pressing <strong><code>⌘ space bar</code></strong> and entering &lsquo;Ruby&rsquo; will show you a list of all documents that mention Ruby.</li>
<li><strong><code>mdfind query</code></strong>  note that the query does not have to be 1 word, but can be several.</li>
<li><strong><code>mdfind image</code></strong> will find all image files (if you run it from any directory, it will still search for all images for an existing user, just like Spotlight does). If you run it, and it starts giving you an endless output of image file paths, just run <strong><code>Ctrl + C</code></strong> to stop it.</li>
<li><strong><code>mdfind image -onlyin path/to/directory</code></strong> searches for all images in a certain directory</li>
</ul>


<p><img class="center" src="/images/mdfindonlyin.png"></p>

<ul>
<li><p><strong><code>mdfind *query* -onlyin path/to/directory/1 -onlyin path/to/directory/2</code></strong> paths can be stacked just like other queries.</p></li>
<li><p><strong><code>mdfind query -onlyin $PWD</code></strong> to search in a current directory.</p></li>
</ul>


<p><img class="center" src="/images/onlyin_pwd.png"></p>

<ul>
<li><strong><code>mdfind query -live</code></strong> watches outcome of a search for a certain query. So if a file with a matching metadata is added, the terminal tab/window in which you are running that command will show that file.</li>
</ul>


<p><img class="center" src="/images/onlyin_pwd.png"></p>

<p><strong> Boolean operators and </strong><code>mdfind</code><strong>: </strong></p>

<p>You are probably familiar with boolean operators if you are developer. <strong><code>mdfind</code></strong> uses a very simplified version of them:</p>

<ul>
<li><p><strong><code>mdfind query1|query2</code></strong> &ndash; OR; note no whitespace</p></li>
<li><p><strong><code>mdfind query1(-query2</code>)</strong> &ndash; excludes query 2; note no whitespace</p></li>
<li><p>Use <strong><code>()</code></strong> to group queries. To find matches to 2 queries, use <code>mdfind (query1 query2)</code>** as <code>mdfind query1 query2</code> will only search for the second word.</p></li>
<li><p>Use <code>""</code> to escape apostrophes, otherwise your Terminal will think your query is incomplete.</p></li>
</ul>


<p><img class="center" src="/images/mdfind_apostrophe.png"></p>

<hr />

<p><strong><code>locate</code></strong></p>

<ul>
<li><strong><code>locate</code></strong> &ldquo;find filenames quickly.&rdquo; <em>Quickly</em> is the keyword here. It relies on an index database of all filenames to find the one you need. Think of it as a cookbook index: instead of parsing throughout every recipe that uses shiitake mushrooms, you go straight to the index in the back. look for shiitake, and it tells you where to look for it. The problem with it is that the index is only updated once a week or so, so if you are looking for a newly created file, it may not come up.</li>
</ul>


<p><img class="center" src="/images/locate_turkey.png"></p>

<ul>
<li>Using <strong><code>locate</code></strong> for the first time ever or after a major system update can cause a following error: &ldquo;WARNING: The locate database (/var/db/locate.database) does not exist.&rdquo;</li>
</ul>


<p><img class="center" src="/images/locate_missing_database.png"></p>

<p>Follow the instructions to generate an index database; it will take some time to run as it will go through every file on your system to generate its index (in cookbook terms, someone had to go through and read every recipe and list every ingredient in the index.) It actually does not alert you to the fact it is being generated in the background, but it should work fine and if you run the command again an hour or so later, the database should be there.</p>

<p>You can receive instructions your index database is outdates, in which case you similarly need to follow instructions to rebuild it.</p>

<ul>
<li>Note that both <strong><code>find</code></strong> and <strong><code>locate</code></strong> are case-sensitive when it comes to file names. Use <strong><code>-i</code></strong> flag to make them case-insensitive.</li>
</ul>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="2">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
   
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:annaershova.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
  
    <section>
  <ul id="recent_posts">
      <li class="post">
      <a href="http://annaershova.github.io" alt="Home"><img src="/images/Home.png"></a>
      <a href="http://annaershova.github.io/archives/" alt="Archives"><img src="/images/Calendar.png"></a>
      <a href="mailto:anna.ershova@gmail.com" alt="E-Mail"><img src="/images/Envelope.png"></a>
      <a href="http://annaershova.github.io/atom.xml" alt="subscribe feed"><img src="/images/rss_big.png"></a>
      </li>
  </ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/11/10/some-thoughts-on-test-driven-development/">Some Thoughts on Test-Driven Development</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/11/03/ruby-loop-with-a-twist/">Ruby Loop -- With a Twist</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/26/variable-in-ruby/">Global Variables in Ruby</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/26/basics-of-speeding-up-rails-app/">Basics of Speeding Up Rails App</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/26/what-about-localhost-3000/">What About Localhost:3000?</a>
      </li>
    
  </ul>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Anna Ershova -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>



<script>
  $(document).ready(function() {  
    var stickyNavTop = $('nav').offset().top;  
      
    var stickyNav = function(){  
      var scrollTop = $(window).scrollTop(); 
      var navHasClassSticky = $('nav').hasClass('sticky');

      if (scrollTop > stickyNavTop && navHasClassSticky) {   
        return true;
      } else if (scrollTop > stickyNavTop) {
        $('nav').hide();
        $('nav').addClass('sticky');
        $('nav').fadeIn('2000');
      } else {  
        $('nav').removeClass('sticky');   
      }  
    };  
      
    stickyNav();  
      
    $(window).scroll(function() {  
      stickyNav();  
    });  
  });  
</script>


</body>
</html>
