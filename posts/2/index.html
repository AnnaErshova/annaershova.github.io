
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Getting De-railed</title>
  <meta name="author" content="Anna Ershova">

  
  <meta name="description" content="Developers tend to spend a lot of time in their Terminals, and while most know all the basic commands to run, there are some that are less commonly &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://annaershova.github.io/posts/2">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Getting De-railed" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='https://fonts.googleapis.com/css?family=Noto+Serif:400,700' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-69356303-1']);
    _gaq.push(['_setDomainName','github.io']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Getting De-railed</a></h1>
  
    <h2>Anna's blog</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  
  
</ul>

<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/10/19/mastering-your-terminal-part-i/">Mastering Your Terminal -- Part I</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-10-19T16:15:58-04:00" pubdate data-updated="true">Oct 19th, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Developers tend to spend a lot of time in their Terminals, and while most know all the basic commands to run, there are some that are less commonly used, but quite nifty to know.</p>

<p>In an <a href="http://annaershova.github.io/blog/2015/10/12/updating-os-x-from-your-command-line/">earlier post</a>, I mentioned that one can use command line to run a software update command: <code>softwareupdate -l</code> to see what updates are available:</p>

<p><img class="center" src="/images/softwareupdate_list.png"></p>

<p>Terminal, or more accurately, Terminal.app, is a terminal emulator program that provides a connection to your shell (most likely <strong><code>bash</code></strong>; run <strong><code>echo $0</code></strong> to see what yours is running).</p>

<p>Technically speaking, running commands in Terminal is really running commands in a command-line interface that runs in a shell that runs in Terminal.</p>

<p>Now that we got that out of the way &ndash;</p>

<p><strong>Some basic tricks</strong>:</p>

<ul>
<li><p><strong><code>Up</code></strong> or <strong><code>down</code></strong> key to navigate between commands. I use <strong><code>up</code></strong> all the time when navigating to a previously used command that is too long to type again.</p></li>
<li><p><strong><code>!!</code></strong> to repeat last command (this will be specific to your Terminal window or tab in which you run it)</p></li>
</ul>


<p><img class="center" src="/images/bang_bang.png"></p>

<p>Ok, it is actually easier to press the <strong><code>up</code></strong> arrow once, but hey, saying <em>bang bang</em> out loud is a lot more fun.</p>

<ul>
<li>Drop file name from Finder into terminal to get its path &ndash; it can be then copy-pasted into a <strong><code>cd</code></strong> command etc.</li>
</ul>


<p><strong>More ways to navigate Terminal using familiar shortcuts</strong>:</p>

<ul>
<li><p><strong><code>Ctrl + T</code></strong> to open a new tab within the same Terminal session.</p></li>
<li><p><strong><code>Ctrl + F</code></strong> to search your Terminal&rsquo;s tab or session (actual text output thereof).</p></li>
<li><p><strong><code>Command + +</code></strong> or <strong><code>Command + -</code></strong> to zoom in or out.</p></li>
<li><p><strong><code>Command + G</code></strong> to go to a next search match, <strong><code>Command + Shift + G</code></strong> to go to a previous match.</p></li>
<li><p><strong><code>Control + C</code></strong> or <strong><code>Command + .</code></strong> to cancel a command. Rails developers use that a lot to stop Rails server from running, for instance.</p></li>
<li><p>Use <strong><code>TAB</code></strong> to autocomplete a directory name. Use <strong><code>TAB</code></strong> <strong><code>TAB</code></strong> to show a list of options when there are multiple matches.</p></li>
</ul>


<p><strong>Who am I, where am I, and what time is it anyway?</strong></p>

<ul>
<li><strong><code>pwd</code></strong> to see user&rsquo;s current directory:</li>
</ul>


<p><img class="center" src="/images/pwd_use.png"></p>

<ul>
<li><strong><code>whoami</code></strong> to see username of the owner of the current login/connection session in the shell (or in manual&rsquo;s words, &ldquo;display effective user id&rdquo;)</li>
</ul>


<p><img class="center" src="/images/whoami.png"></p>

<ul>
<li>While <strong><code>whoami</code></strong> is a very commonly listed command in all of the top-20-Terminal-commands-you-must-learn-now list, its cousins <strong><code>WhoAmI</code></strong> and <strong><code>who am i</code></strong> are less known:</li>
</ul>


<p><img class="center" src="/images/whoami_variations.png"></p>

<p>(There is no manual entry on <strong><code>WhoAmI</code></strong>, and that seems like a pretty rare command in general.)</p>

<ul>
<li>Another cousin <strong><code>who</code></strong> displays a more expanded version of <strong><code>who am i</code></strong>, effectivly showing all users that are currently logged in into a terminal session:</li>
</ul>


<p><img class="center" src="/images/who.png"></p>

<ul>
<li>And yet another cousin <strong><code>w</code></strong> &ldquo;displays who is logged in and what they are doing:</li>
</ul>


<p><img class="center" src="/images/w_command.png"></p>

<ul>
<li><strong><code>date</code></strong> to see current date and time:</li>
</ul>


<p><img class="center" src="/images/date_command.png"></p>

<p><strong>How do I get around?</strong></p>

<ul>
<li><p><strong><code>cd directory_name</code></strong> or <strong><code>cd path/to/directory</code></strong> to move to a different directory</p></li>
<li><p><strong><code>TAB</code></strong> can be used with <strong><code>cd</code></strong> to autocomplete a directory name, but using an asterix (*) as a wildcard also works:</p></li>
</ul>


<p><img class="center" src="/images/cd_wild_card.png"></p>

<ul>
<li><strong><code>?characters</code></strong> to search for a specific name:</li>
</ul>


<p><img class="center" src="/images/cd_wild_card.png"></p>

<ul>
<li><p><strong><code>cd ..</code></strong> to move up one directory, <strong><code>cd ../..</code></strong>  to move up two directories, and so forth.</p></li>
<li><p><strong><code>cd ~</code></strong> or just <strong><code>cd</code></strong> to go to your home directory.</p></li>
<li><p><strong><code>cd /</code></strong> to go to the level of your file hierarchy (this is not the same as home):</p></li>
</ul>


<p><img class="center" src="/images/root_vs_top.png"></p>

<ul>
<li><strong><code>cd -</code></strong> to go to the last visited directory:</li>
</ul>


<p><img class="center" src="/images/cd_minus.png"></p>

<ul>
<li>Note on case sensitivity: generally, names of files and directories (so that <strong><code>cd octopress</code></strong> is the same as <strong><code>cd Octopress</code></strong>) are not case sensitive unless you have specially set up your system to be that way.</li>
</ul>


<p><strong>So what am I seeing in here?</strong></p>

<ul>
<li><strong><code>ls</code></strong> to see a list of files in your directory (or <strong><code>ls directory/path</code></strong> for another directory)</li>
</ul>


<p><img class="center" src="/images/octopress_ls.png"></p>

<ul>
<li><strong><code>ls -l</code></strong> to see a <em>l</em>ong list of files, including creation dates and access permissions, number of links in the item, etc:</li>
</ul>


<p><img class="center" src="/images/du_sh.png"></p>

<ul>
<li><strong><code>ls -lh</code></strong> or <strong><code>ls -l -h</code></strong> (flags can be combined) to see a <em>h</em>uman readable output as long list. In this case, the only thing that changes is size in bytes is converted into units that make more sense such as kilobytes. Note that <strong><code>-h</code></strong> flag can be use with some other commands as well.</li>
</ul>


<p><img class="center" src="/images/ls_lh.png"></p>

<p>(Try running <strong><code>ls</code></strong> first, then <strong><code>!! -l</code></strong>, then <strong><code>!! -h</code></strong> to stack these commands. Or just press an <strong><code>up</code></strong> key and add those flags before hitting enter).</p>

<ul>
<li><p><strong><code>ls /</code></strong> (or any other <strong><code>ls</code></strong> command with a <strong><code>flag</code></strong> and <strong><code>/</code></strong>) to see contents of home directory. Note that normally, you have to be in the directory which contents you are trying to view.</p></li>
<li><p><strong><code>du -sh directory_name</code></strong> to see size of a directory:</p></li>
</ul>


<p><img class="center" src="/images/date_command.png"></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/10/18/generating-and-deleting-a-rails-scaffold/">Rails Scaffold: Generating It, Deleting It, Evaluating Pros and Cons</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-10-18T12:13:33-04:00" pubdate data-updated="true">Oct 18th, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Rails comes with a number of very convenient <a href="http://guides.rubyonrails.org/generators.html">generators</a> that can take a lot of work out of creating models, controllers, views, tests, corresponding database migrations, etc.</p>

<p>Like many other developers, I use Rails scaffold generation as an efficient and convenient time-saver.</p>

<p>From <a href="http://guides.rubyonrails.org/command_line.html">Guides</a>:</p>

<blockquote><p>A scaffold in Rails is a full set of model, database migration for that model, controller to manipulate it, views to view and manipulate the data, and a test suite for each of the above.</p></blockquote>

<p>Of course, you can generate all of those components individually as well, depending on your needs. But I think the scaffold generator in particular gets quite overused.</p>

<p>A regular scaffold Terminal command looks like this: <code>rails g scaffold Model_Name column_name:column_type:optional_index</code></p>

<p><img class="center" src="/images/scaffold_generate.png"></p>

<p><code>Model_Name</code> should be in singular, either under_scored or CamelCased.</p>

<p>Sometimes you hit the <code>return</code> button too soon, and deleting generated files by hand is just too much trouble.</p>

<p>There is a way to undo your entire scaffold: <code>rails d scaffold Generated_Scaffold_Name</code>:</p>

<p><img class="center" src="/images/scaffold_destroy.png"></p>

<p>(You can type out <code>generate</code> instead of <code>g</code> and <code>destroy</code> instead of <code>d</code>.)</p>

<p>Note that if you have already run <code>rake db:migrate</code> after generating your scaffold, the <code>destroy</code> command won&rsquo;t work. It will delete the files that the scaffold command has created, but it won&rsquo;t alter the schema and whatever alterations your migration has created will stay there. See my <a href="http://annaershova.github.io/blog/2015/10/15/rake-database-tasks/">previous post</a> on database-related rake commands to learn how to fix that (you will probably want <code>rake db:migrate:down</code> or <code>rake db:rollback</code>).</p>

<p>And assuming you do version control, to see if the <code>destroy</code> command left any files, run <code>git status</code> or <code>git diff</code>.</p>

<p>Realistically speaking, to create a scaffold that later needs to be edited (say, a new migration created etc &ndash; obviously a very common scenario) can cause more time-consuming bug-hunting than creating your MVC + other accoutrements from scratch.</p>

<p>To generate a scaffold with tests (default option) stops a developer from proper test-driven development practices: writing a failing test first, and then making it pass.</p>

<p>You can of course pass in an option to prevent tests from being generated when creating a scaffold. Run <code>rails generate scaffold -h</code> to see a list of options in your terminal:</p>

<p><img class="center" src="/images/scaffold_options_1.png">
<img class="center" src="/images/scaffold_options_2.png"></p>

<p>The options above are for Rails 4.2.0 and might be quite different for your version of Rails.</p>

<p>You can see that the command comes with a variety of options that allow for reasonable flexibility. For instance, to skip generating a migration, you can pass in <code>--skip-migration</code>. To skip creating tests, pass in <code>--no-test-framework</code>.</p>

<p>Ultimately, once you know exactly what you are building to the extent that you end up passing in a lot of options, you don&rsquo;t really need generators anymore and can create files manually that fit your needs. You wouldn&rsquo;t want to use it for production. But if you are just learning Rails and experimenting with it, generators are very handy.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/10/15/rake-database-tasks/">Rake Database Tasks</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-10-15T10:47:23-04:00" pubdate data-updated="true">Oct 15th, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>There are multiple <strong><code>db</code></strong> namespace rake tasks, which are very useful for a Rails developer.</p>

<p>I don&rsquo;t often see them covered in Rails tutorials as a task list, and it took me a while to figure out which commands I needed to use in my regular workflow.</p>

<hr />

<p><strong>Migrations</strong></p>

<p>Most beginner developers stick to <strong><code>rake db:migrate</code></strong>, <strong><code>rake db:seed</code></strong> and <strong><code>rake db:reset</code></strong>, but there are quite a few more options.</p>

<p><em>Migration</em> is a version of a database (I <em>still</em> don&rsquo;t understand <em>what we are migrating and where</em>, but oh well, such is conventional terminology).</p>

<p>Each new migration modifies a database schema (which starts out completely blank) by adding and removing data, changing data types etc.</p>

<p>Your schema is normally stored in  <strong><code>db/schema.rb</code></strong>, although for some developers, it will be in <code>db/structure.sql</code>.</p>

<p>(To create and use <code>structure.sql</code>, use <code>config.active_record.schema_format = :sql</code> in your <code>config/application.rb</code>. Most beginners should be sticking to schema.rb, the default version.)</p>

<hr />

<p><strong>First, some schema-related rake tasks:</strong></p>

<ul>
<li><p><strong><code>rake db:version</code></strong> - to see your current schema version. Schemar versions are normally also listed as timestamps, so you will see something like <code>Current version: 20151014015045</code>.</p></li>
<li><p><strong><code>rake db:forward</code></strong> will push the schema one step up.</p></li>
<li><p><strong><code>rake db:schema:load</code></strong> &ndash; loads she schema into your database. Good practice is using it when you first put your app in production; then run migrations from there on.</p></li>
<li><p><strong><code>rake db:schema:dump</code></strong> &ndash; dumps she schema.</p></li>
</ul>


<hr />

<p><strong> Now back to migrations: </strong></p>

<p>The easiest way to generate a migration is to run <strong><code>rails g migration AddUseridToPosts user_id:integer</code></strong>.</p>

<p>Once a migration has been generated, it will be listed in your <code>db/migrate</code> folder, usually with a format <code>datestamp_migration_name.rb</code>. Running <code>rails g</code> generates a timestamp prefix because that is the order that Rails uses to execute pending migrations.</p>

<p>If you are creating a migration manually or copying over from another file, you need to use any alphanumeric prefix (even if it&rsquo;s one 1,2, and 3) that allows Rails to run pending migrations in correct order; or use a manual datestamp if that&rsquo;s what your other migrations use.</p>

<p>The migration in the example above adds a new colume of <code>user_id</code>, which is a type <code>integer</code>, to a table named <code>Posts</code> &ndash; assumption here is that one user <code>has_many</code> posts and a post <code>belongs_to</code> user (if you don&rsquo;t know what that means, see <a href="http://guides.rubyonrails.org/association_basics.html">Active Record Association Basics</a> ).</p>

<p>You can generate a migration to add a new table altogether, to remove a table or a column, to change a data type of a column, etc.</p>

<p>Even if the migration is in your migrate folder, it does not mean it is in the database schema yet. To incorporate it into the schema, you have any pending migrations into it. And that&rsquo;s when <code>rake db:migrate</code> task comes in.</p>

<p>Before I get started, see this <a href="https://github.com/rails/rails/blob/master/activerecord/lib/active_record/railties/databases.rake">rails source</a> to see the database.rake file that describes exactly what each task does.</p>

<p>Rake tasks undergo changes between different versions of Rails, so it&rsquo;s good to keep an eye out for anything that might be coming soon.</p>

<hr />

<p><strong> Rake migration tasks </strong></p>

<ul>
<li><p><code>rake db:migrate</code> &ndash; runs the change or up method for all pending migrationsone by one in order indicated by name prefixes. If there are no such migrations, running the task won&rsquo;t produce any outcome. But when there are, it also executes <code>db:schema:dump</code> as it needs to dump the schema and build it anew considering the migration(s) that have been added.</p></li>
<li><p><code>rake db:migrate VERSION=version_number/timestamp</code> &ndash; runs specific migration to which the datestamp refers.</p></li>
<li><p>NB: <code>rake db:migrate VERSION=0&gt;</code> &ndash; roll back all migrations</p></li>
<li><p><code>rake db:migrate RAILS_ENV=test</code> &ndash; runs migrations in an indicated envrionment.</p></li>
</ul>


<p>You should be able to get timestamp as a prefix to a migration file name if you used a rails g command as explained above.</p>

<ul>
<li><p><code>rake db:migrate:up</code> &ndash; runs up command for a given migration version (default is current version)</p></li>
<li><p><code>rake db:migrate:down</code> &ndash; runs down command aka rolls back command for a given migration version</p></li>
</ul>


<p>NB: <code>Up</code> and <code>down</code> are actually old-school commands; <code>up</code> makes a change to the schema and <code>down</code> reverses the <code>up</code> change.</p>

<ul>
<li><p><code>rake db:migrate:redo</code> &ndash; &ldquo;Rollbacks the database one migration and re migrate up (options: <code>STEP=x</code>, <code>version_number/timestamp</code>).&rdquo;</p></li>
<li><p><code>rake db:migrate:redo STEP=x</code> = rolls back x many migrations and re-runs them</p></li>
<li><p><code>rake db:migrate:rollback</code> &ndash; roll back last migration to get user back one step.</p></li>
<li><p><code>rake db:migrate:rollback STEP=x</code> &ndash; roll back x many steps</p></li>
</ul>


<p>Now this is interesting:</p>

<ul>
<li><strong><code>rake db:migrate:reset</code></strong> = <strong><code>rake db:drop</code></strong> + <strong><code>rake db:create</code></strong> + <strong><code>rake db:migrate</code></strong> = undo and re-do migrations again for current environment. It does not rollback migrations. You would want to use it when, say, running <strong><code>rails destroy scaffold Name</code></strong> as it will remove a corresponding migration and the schema would need to be re-created. You would still need to run <strong><code>rake db:seed</code></strong> if you have any seed data.</li>
</ul>


<p>(<strong><code>rake db:create</code></strong> is rather straightforward and an opposite of <strong><code>rake db:drop</code></strong>; it needs to be run when a Rails project is first created or after a database has been dropped, as it the case with <strong><code>rake db:migrate:reset</code></strong> above).</p>

<p>Note the difference compared to:</p>

<ul>
<li><strong><code>rake db:reset</code></strong> = <strong><code>rake db:drop</code></strong> + <strong><code>rake db:setup</code></strong></li>
</ul>


<p>where</p>

<p><strong><code>rake db:setup</code></strong> = <strong><code>rake db:schema:load</code></strong> OR <strong><code>rake db:structure:load</code></strong> + <strong><code>rake db:seed</code></strong></p>

<ul>
<li><p>(<strong><code>rake db:schema:load</code></strong> loads <strong><code>schema.rb</code></strong> into your database)</p></li>
<li><p>(<strong><code>rake db:structure:load</code></strong> loads <strong><code>db/structure.sql</code></strong> if you have specified that in your config, otherwise it will load <strong><code>db/schema.rb</code></strong>)</p></li>
</ul>


<p>Which means that <strong><code>rake db:reset</code></strong> drops the database; recreates it from <strong><code>db/schema.rb</code></strong> or <strong><code>db/structure.sql</code></strong> in your current environment (and NOT from migrations); seeds database from <strong><code>seeds.rb</code></strong>. Note that if you have had anything imported into your database from, say, a <strong><code>csv</code></strong> file, that content will also be gone.</p>

<ul>
<li>Note that <strong><code>rake db:migrate:reset</code></strong> won&rsquo;t seed your database and <strong><code>rake db:setup</code></strong> will.*</li>
</ul>


<p>Another rake task is also useful to see where you are with regard to migrations:</p>

<ul>
<li><strong><code>rake db:migrate:status</code></strong> &ndash; display status of all migrations. It will alert you if there are no schema migrations in your project yet.</li>
</ul>


<p>And a heavy hitter to get you re-started with a clean slate:</p>

<ul>
<li><strong><code>rake db:purge</code></strong> &ndash; &ldquo;Empty the database from DATABASE_URL or config/database.yml for the current RAILS_ENV (use db:drop:all to drop all databases in the config). Without RAILS_ENV it defaults to purging the development and test databases.&rdquo;</li>
</ul>


<p>(The <strong><code>rake db:purge</code></strong> task was only added in January 2014 and is less known.)</p>

<hr />

<p>There is a great Rails Guide explaining a lot of these <a href="http://edgeguides.rubyonrails.org/active_record_migrations.html">here</a>.</p>

<p>Remember to restart your rails server when working with these.</p>

<p>Should these tasks not meet your needs, you can always create a custom rake task to do exactly what you need.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/10/13/making-simple-rake-tasks/">Making Custom Rake Tasks and Using Them With ERD</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-10-13T08:52:15-04:00" pubdate data-updated="true">Oct 13th, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I started making my own rake tasks recently to help with specific repetitive tasks that I need to do while working on projects.</p>

<p>Rake is a project of Jim Weinrich; check out his rationale for making rake <a href="http://rake.rubyforge.org/files/doc/rational_rdoc.html">here</a>.</p>

<p>My favorite part is his explanation of why it is called rake. No, it has nothing to do with garden tools. It was supposed to be a portmanteau of <strong>&lsquo;ruby&rsquo;</strong> and <strong>&lsquo;make&rsquo;</strong> (since Rake was inspired by Makefile). Hence, rake.</p>

<p><strong><code>rake -T</code></strong> will give you a list of rake tasks available for a given project.</p>

<p>This is what it looks like for a standard octopress directory:</p>

<p><img class="center" src="/images/take_t.png"></p>

<p>So if I forget that my normal routine is <strong><code>rake generate</code></strong> followed by <strong><code>rake preview</code></strong>, I can see it listed above.</p>

<p>I was working with the <a href="https://github.com/voormedia/rails-erd">erd</a> gem, which uses <a href="http://www.graphviz.org/">Graphviz</a> to visualize complex database relationships in rails. If you want to understand what exactly is happening in your schema, it&rsquo;s the gem for you.</p>

<p>I haven&rsquo;t used it in a bit, so I googled it, and <a href="https://ryanboland.com/blog/creating-a-database-diagram-with-rails-erd/">this tutorial</a> popped up.</p>

<p>It had a suggestion to make a simple rake task to run the erd command with specific attributes to get just the type of a diagram you want:</p>

<pre><code class="``ruby desc 'Generate Entity Relationship Diagram'">  task :generate_erd do
    system "erd --inheritance --filetype=dot --direct --attributes=foreign_keys,content"
    system "dot -Tpng erd.dot &gt; erd.png"
    File.delete('erd.dot')
  end
</code></pre>

<p>The idea there is have a task that runs <strong><code>erd --inheritance --filetype=dot --direct --attributes=foreign_keys,content</code></strong>. The system then generates a <strong><code>.dot</code></strong> file, which is when converted into a <strong><code>.png</code></strong> file, with the rationale being that Graphviz has issues generating files that are not <strong><code>.dot</code></strong>.</p>

<p>You can just put it in a rake file, or run <strong><code>rails g task erd generate_erd</code></strong>. It adds a <strong><code>erd.rake</code></strong> file to <strong><code>lib/tasks</code></strong> (or you can add one manually and just type your code instead of using a generator).</p>

<p>To use that task, you type <strong><code>rake erd:generate_erd</code></strong> in your Terminal.</p>

<p>I ended up using these rake tasks to demonstrate the idea behind using namespace. They generate a <strong><code>png</code></strong> file as per an example above and a default <strong><code>pdf</code></strong> one:</p>

<p><img class="center" src="/images/rake_commands.png"></p>

<p>And running these tasks in Terminal:</p>

<p><img class="center" src="/images/rake_terminal.png"></p>

<p>And you are done! Two file types of database schema charts have been generated:</p>

<p><img class="center" src="/images/erd_directory.png"></p>

<p>NB: if all you wanted was to simplify running one long command (such as the aforementioned <strong><code>erd --inheritance --filetype=dot --direct --attributes=foreign_keys,content</code></strong>), you could just create a shell alias that you could then use across all your projects if they have erd installed.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/10/12/mac-uptime-and-reboot-stats/">Mac Uptime and Reboot Stats</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-10-12T11:46:01-04:00" pubdate data-updated="true">Oct 12th, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>While we are on a subject of controlling your Mac from your Terminal, here is something else that is useful:</p>

<p>Mac uptime is how long it has been since the system has been re-booted or re-started. Type in <strong><code>uptime</code></strong> in your Terminal, and you will see the stats in minutes, hours, or days, depending on how long it has been for your Mac:</p>

<p><img class="center" src="/images/uptime.png"></p>

<p>(I just re-booted when installing a new OS X hence such a short uptime for me. Uptime can extend into months for some users as Macs tend to be very stable unlike Windows machines.)</p>

<p>You will also see number of users using your machine during said uptime as well as load averages in 1, 5, and 15 minute intervals from left to right &ndash; mine actually indicate I may want a more powerful system.</p>

<p>Run <strong><code>last reboot</code></strong>  to see rebooting history:</p>

<p><img class="center" src="/images/lastreboot.png"></p>

<p>Another neat trick is to run in <strong><code>last</code></strong> to see last sessions of users, hosts and ttys in a reverse chronological order:</p>

<p><img class="center" src="/images/last.png"></p>

<p>There are handy gadgets for uptime and reboot stats, but I doubt that most regular users would really need them on a regular basis. Checking in with your Terminal now and then should be sufficient.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/10/12/updating-os-x-from-your-command-line/">Updating OS X From Your Command Line</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-10-12T11:16:32-04:00" pubdate data-updated="true">Oct 12th, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I am really used to seeing a pop up that says something along the lines of <strong><code>a new version of OS X / iOS is available, do you want to update now?</code></strong></p>

<p>Upon some research on potential issues of an update in question (I learned the hard way after having my iPhone bricked post-update when living in China), I generally go back and click <strong><code>update</code></strong>. But there is actually an easy way to do it from your Terminal. All you need is a <strong><code>softwareupdate</code></strong> command.</p>

<p>Type in <strong><code>man softwareupdate</code></strong> to see this command&rsquo;s manual:</p>

<p><img class="center" src="/images/softwareupdatemanual.png"></p>

<p>Run <strong><code>softwareupdate -l</code></strong> to see available updates. You will see something like this:</p>

<p><img class="center" src="/images/softwareupdate_l.png"></p>

<p>While you are at it, you can turn on automatic update checker from your Terminal: <strong><code>sudo softwareupdate --schedule on</code></strong> (<strong><code>off</code></strong> to disable it).</p>

<p><img class="center" src="/images/softwareupdateautomaticcheck.png"></p>

<p>Then run this to install the specific update you want: <strong><code>sudo softwareupdate --install UPDATE_NAME</code></strong></p>

<p><img class="center" src="/images/supdinstall.png"></p>

<p>(Use the <strong><code>-d</code></strong> flag to just download the update, but not install it.)</p>

<p>And of course to re-boot your computer, you can simply run this command instead of going through the Mac menu: <strong><code>sudo shutdown -r now</code></strong></p>

<p><img class="center" src="/images/shutdown.png"></p>

<p>Voila!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/10/11/running-edge-rails-living-dangerously/">Running Edge Rails -- Living Dangerously</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-10-11T18:43:11-04:00" pubdate data-updated="true">Oct 11th, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Rails is constantly being updated and improved. Sometimes, the changes that have been announced are just too exciting to wait for an official release.</p>

<p>When I first read about ‘Edge Rails’, I was quite confused because it sounded like yet another JS library. Then when I was reading The Rails Way (Amazon <a href="http://www.amazon.com/The-Rails-Way-Obie-Fernandez/dp/0321445619">link</a> if you have somehow never heard of it), I realized I had been mistaken.</p>

<p>Grammatically speaking, it should be spelled <em>edge Rails</em>, as in lowercase <em>e</em>. But that is really between you and your text editor. In this context, ‘edge' just means the latest, cutting-edge version of Rails that has not been officially released yet.</p>

<p>Rails 5 looming upon us, but there is no official release date. I gather the best guess is late 2015 — early 2016. It does have some exciting features, such as merging of the rails-api gem / built-in support of the JSON APIs). So what do you do if you want to play around with that and don’t want to wait until the official release?</p>

<p>Ruby -v to see if you are using ruby 2.2.2+  as Rails 5 requires it. Use rvm to make sure you are running a suitable version.</p>

<p>The best instructions to install edge Rails can be found <a href="http://www.christopherbloom.com/2015/04/26/setting-up-a-rails-5-app-from-edge/">here</a> on Christopher Bloom&rsquo;s blog — they are straightforward and and I used them successfully, so I’d rather send you to the source than to copy-paste them here.</p>

<p>RailsGuides has an <a href="http://edgeguides.rubyonrails.org/">EdgeGuides</a> section specifically targeting the current master branch of the Rails repo.</p>

<p>Running edge Rails comes at a cost of potentially unstable dependencies. Having said that, it is not <em>that</em> unstable. Rails has a very extensive test coverage, which should help prevent regressions.</p>

<p>So do you want to run edge Rails? Probably not, unless you really plan to take advantage of groundbreaking unleashed feature or if you are particularly curious. But it’s nice to know it’s there.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/08/08/and-the-new-app-is-done/">And the New App Is Done</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-08-08T19:15:00-04:00" pubdate data-updated="true">Aug 8th, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Behold &ndash; a real <a href="http://theweatherproject.herokuapp.com/">app</a>!</p>

<p>We used meteorological knowledge to convert weather forecasts into a &lsquo;real-life&rsquo; weather forecast. It takes into account humidity and wind speed for a variety of different scenarios to tell you what will it actually feel like outside in the next 36 hours. Some days, it will feel colder / cooler than what the weather forecasts say, and some days it will much hotter / warmer.</p>

<p>This was really fun to work on, and I really enjoyed making something useful &ndash; I have been using it every day to make sartorial choices and to figure out best time of the day to run outside.</p>

<p>And it&rsquo;s sassy.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/07/29/project-mode-week-1/">Project Mode -- Week 1, Day 2</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-07-29T11:08:32-04:00" pubdate data-updated="true">Jul 29th, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>&hellip;and we are officially in Project Mode here at the Flatiron School, working on project 1 of 2, which is meant to be a short project to be conceptualized, pitched, designed, built, and presented within a scope of 5 business days.</p>

<p><a href="https://youtu.be/7fx6AknguzI">Here</a> is a very short video showcasing functionality that we have built in 2 days. We have deployed to Heroku since the video was made, which turned out to be much easier than expected, minus some fiddling with the Figaro gem.)</p>

<p>Primary goal right now is to make it aesthetically pleasing.</p>

<p>It looks fairly simple, but it actually features some pretty advanced weather-related logic. Who would have thought that energy trading background would come in handy.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/07/26/twitter-sentiment-analysis-rails-app/">On a Scale of Dalai Lama to Kanye West, How Narcissistic Are You? A Rails App That Lets You Find Out Just That.</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-07-26T09:32:26-04:00" pubdate data-updated="true">Jul 26th, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>For a small side project to be shared with our Flatiron School classmates and some <a href="http://www.meetup.com/Flatiron-School-Presents/">Flatiron School Presents Meetup</a> guests, my partner Mitch and I decided to build an app that measures people&rsquo;s narcissism levels via their Twitter feed. A linguistic analysis-baased social insights algorithm, if you will.</p>

<p><img class="center" src="/images/kanye-meme.png"></p>

<p>(meme taken from <a href="http://knowyourmeme.com/photos/688363-kanye-west">here</a> &ndash; spoiler alert for celebrities' narcissism levels)</p>

<p>Much has been said and done and invested into when it comes to social media sentiment analysis in finance, with many financial institutions investing heavily in it. A cursory Google search offers up names of many start-ups involved in mining, mapping, analyzing, and plain having fun with Twitter. We figured that as tech professionals, working with social media and building a fun prototype for understanding the tools and the medium is a valuable experience.</p>

<p>Our original idea was parsing through people&rsquo;s Instagram feed to see how many posted photos were selfies for a better narcissism indicator, but considering advanced facial recognizition technology needed and the fact it was meant to be a small side project executed while carrying on a full school work load, we have settled on the twitter-based project.</p>

<p>The <a href="https://github.com/sferik/twitter">Twitter gem</a> made working with Twitter a breeze, although there were limitations for how many posts could be parsed through at once and of course the max number of timeout requests every minute.</p>

<p>We designed everything through the use of good ol' Rails New NarcissismProject. We had one user model that we worked with.</p>

<p>The front page invites a user to check how narcissistic the are by entering a twitter handle (which will work whether or not prefixed with an @ to make user&rsquo;s life easier; we have also allowed for the first or last typed character to be blank space in case a user is very space-key-trigger-happy; other than that, the handle has to follow Twitter rules as ensured by a RegEx check):</p>

<p><img class="center" src="/images/narcissism-app-front-page.png"></p>

<p>Once a user enters a twitter handle, it parses their feed for key narcissism-related words that we have pre-determined in the app; it then checks it against a scale of celebrities. It then returns user&rsquo;s score and their celebrity match (mine is Flatiron School&rsquo;s very own <a href="https://twitter.com/aviflombaum">Avi Flombaum</a>)</p>

<p>We don&rsquo;t share the celbrity scale on the app, as it is more fun for the user to discover it him/herself. To built it, we have parsed through the top 100 most-followed twitter accounts (most of which are individual celebrities) and some more and scored them. We then picked some representatives for each scale gradation, throwing in a few Flatiron School-related Easter Eggs, just for fun. If this was a commercial product, we would have to update the celebrity scale just in case some of them go into narcissism rehab or new self-loving celebrities merger.</p>

<p>Most of our findings were unsurprising: Dalai Lama and the Pope were at the very bottom (with Dalai Lama being slightly less narcissistic and thus representing no. 1 on our scale); Kanye West was 9 out of 10 (beat only by the likes of Lena Dunham); Mr. West was closely followed by Kim Kardashian in the 8th place. To me, this means that are simplistic prototype algorithm actually works!</p>

<p>I stopped to pondered if it is unethical to make fun of people&rsquo;s narcissism levels, but considering the celeberities that came up on top and their interest in self-promotion, I figured out their high tankings it would be quite a compliment to them (I am really, really tempted to tweet Mr. West and ask him how he feels about being outdone by Ms Dunham).</p>

<p>What turned out to be incredibly fun was soliciting our friends' and classmates' twitter handles and checking their narcissism levels. A few were truly off-the-charts! (We even had to design more model logic for those cases) The top 10 narcissistic twitter handles are then saved separately and published on the Top 10 page &ndash; with many people I know outdoing our celebrities of choice. Uh oh.</p>

<p>A short demo video can be found <a href="http://youtu.be/T_tTweOvDqs">here</a> &ndash; YouTube link.</p>

<p>And here is a link to the Github <a href="https://github.com/mitchellhart/twitter_analyzer">repo</a>.</p>

<p>I will update this post once the app actually goes live as is our goal.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="3">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="1">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
   
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:annaershova.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
  
    <section>
  <ul id="recent_posts">
      <li class="post">
      <a href="http://annaershova.github.io" alt="Home"><img src="/images/Home.png"></a>
      <a href="http://annaershova.github.io/archives/" alt="Archives"><img src="/images/Calendar.png"></a>
      <a href="mailto:anna.ershova@gmail.com" alt="E-Mail"><img src="/images/Envelope.png"></a>
      <a href="http://annaershova.github.io/atom.xml" alt="subscribe feed"><img src="/images/rss_big.png"></a>
      </li>
  </ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/11/10/some-thoughts-on-test-driven-development/">Some Thoughts on Test-Driven Development</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/11/03/ruby-loop-with-a-twist/">Ruby Loop -- With a Twist</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/26/variable-in-ruby/">Global Variables in Ruby</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/26/basics-of-speeding-up-rails-app/">Basics of Speeding Up Rails App</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/26/what-about-localhost-3000/">What About Localhost:3000?</a>
      </li>
    
  </ul>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Anna Ershova -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>



<script>
  $(document).ready(function() {  
    var stickyNavTop = $('nav').offset().top;  
      
    var stickyNav = function(){  
      var scrollTop = $(window).scrollTop(); 
      var navHasClassSticky = $('nav').hasClass('sticky');

      if (scrollTop > stickyNavTop && navHasClassSticky) {   
        return true;
      } else if (scrollTop > stickyNavTop) {
        $('nav').hide();
        $('nav').addClass('sticky');
        $('nav').fadeIn('2000');
      } else {  
        $('nav').removeClass('sticky');   
      }  
    };  
      
    stickyNav();  
      
    $(window).scroll(function() {  
      stickyNav();  
    });  
  });  
</script>


</body>
</html>
