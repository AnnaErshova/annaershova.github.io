
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Anna's Blog</title>
  <meta name="author" content="Anna Ershova">

  
  <meta name="description" content="I remember curiously peeking at code on GitHub before starting Flatiron. Even then, despite not understanding all too well what the code was meant to &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://annaershova.github.io/posts/2">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Anna's Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='https://fonts.googleapis.com/css?family=Noto+Serif:400,700' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Anna's Blog</a></h1>
  
    <h2>Getting de-railed</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  
  
</ul>

<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/06/27/writing-elegant-code-part-ii-the-rules/">Writing Elegant Code Part II: The Rules</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-06-27T20:22:39-04:00" pubdate data-updated="true">Jun 27th, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I remember curiously peeking at code on GitHub before starting Flatiron. Even then, despite not understanding all too well what the code was meant to do, I could tell that some of it was easier to read than others. My favorite samples had methods that were short and clearly named, variables has clear names, code was organized logically and everything was properly indented.</p>

<p>Now that I can (mostly) write some functioning code, it is time to make sure it is easy to understand to those who may read it at a later point.</p>

<p>And so I went in search of re-factoring rules &ndash; and I found them.</p>

<p>The Rules are Sandi Metz' Rules for Developers and are discussed <a href="https://robots.thoughtbot.com/sandi-metz-rules-for-developers">here</a>.</p>

<p>I am paraphrasing them slightly below:</p>

<blockquote><ol>
<li><p>Classes can be no longer than 100 lines of code ( # sloc &ndash; we are not counting blank lines) to ensure they stay within the single responsibility principle for classes.</p></li>
<li><p>Methods can be no longer than five lines of code in Ruby proper (Rails is hard, and I am still not sure how it is meant to work). And yes, if statements with else and elfish count. Don&rsquo;t do them. Break your code into reasonable methods with easy-to-follow names [use neonates as an example].</p></li>
<li><p>Pass no more than four parameters into a method. Hash options are parameters, too.</p></li>
<li><p>Controllers can instantiate only one object. Views can only know about one instance variable; views should only send messages to that particular object.</p></li>
</ol>
</blockquote>

<p>I will touch on all of these later,  but in this post, I wanted to discuss applying the first 2 in real life (insofar as solving labs can count as &lsquo;real life&rsquo;, of course).</p>

<p>For a lab this week, we had to write a simple game of Rock Paper Scissors and then turn it into a simple web app using Sinatra. To create such a game is far from challenging, and my code was already reasonably succinct at the point when I got all the rspec tests to pass. (NB: that is not how I would actually write the game, but it worked in a lab context).</p>

<p>But the code still felt it could use some re-factoring:</p>

<p><img class="center" src="/images/RPpre-refactoring.png"></p>

<p>Enter The Rules.</p>

<p>My class was much shorter than the mandated 100 lines of code &ndash; check.</p>

<p>Most of my methods were one-liners with 3 winning scenario helper methods designed to not clutter my  won? method. So far, so good.</p>

<p>But what is going on lines 33 to 41? (that method is called on in app.rb to integrate into Sinatra.)</p>

<p><img class="center" src="/images/outcome.png"></p>

<p>It felt too simplistic &ndash; just an if-then statement? really? And I was just itching to improve it somehow. It certthe explicitly frowned upon elsif was there!).</p>

<p>I was not entirely sure how to improve it other than via a nested ternary operator. While I like ternary operators as much as the next noob Ruby developer who thinks they are really cool-looking, nesting them is just the opposite of my goal of writing code that is easily understood by others.</p>

<p><img class="center" src="/images/nestedternary.png"></p>

<p>I had a very vague notion of experimenting with something else instead: calling on all 3 methods, checking which one returns true (and in this case, one and only one will return true) and then returning interpolated name of that method with an exclamation point instead of a question mark. So if method won? is the one that returns true, then the game response would be &lsquo;you won!&rsquo;</p>

<p>I went to one of the instructors, Sophie, seeking her counsel on how to execute just that. After some pry-ing around, we have decided that such a solution would not actually save me any lines of code, because I woulf have to write new methods that will take up the very lines I have saved.</p>

<p>But Sophie did point out something the test did not cover: the computer_play method was sampling the USER_CHOICES (previosuly known as VALID_MOVES) array every time, so I needed to assign it to an instance variable (and that is why pair programming with a more senior professional is so important).</p>

<p>Upon some consideration, I also got rid of the winning scenarios methods (3 basically identicaly methods? sounds like something in need of abtraction to me) by creating a VICTORY_HASH constant.
<img class="center" src="/images/victory_hash.png"></p>

<p>At that point, I could have gotten rid of the VALID_MOVES array, reading it as keys or values of VICTORY_HASH instead, but to keep it allows for better code comprehension, so it was spared from culling.</p>

<p><img class="center" src="/images/valid_moves.png"></p>

<p>To make everything orderly, I re-named &lsquo;user_move&rsquo; as &lsquo;user_play&rsquo;, because I wanted its name to be symmetrical to the computer_play method (whose name was in turn mandated by Rspec).</p>

<p><img class="center" src="/images/user_move.png">
<img class="center" src="/images/user_play.png"></p>

<p>The final code ended up being shorter than before by around 10 lines:</p>

<p><img class="center" src="/images/refactored_rps.png"></p>

<p>And the &lsquo;outcome&rsquo; method? It is still there, staring at me in its simple flow control glory. Rules exist to be broken, I suppose.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/06/21/lines-of-code-is-more-always-better/">Lines of Code: Is More Always Better?</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-06-21T11:24:04-04:00" pubdate data-updated="true">Jun 21st, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A book on Ruby I have been reading brought up an interesting fact: it is common for programmers to be evaluated based on how many lines of code (a.k.a. source lines of code, SLOC) they write per unit of time.</p>

<p>I see how that is commonly applied in a corporate environment. Everyone needs to be evaluated on something. Traders are evaluated on their profit-and-loss statements. Teachers are evaluated on their students' standardized test performance. My cat is evaluated on his cuteness.</p>

<p>So programmers also should be evaluated based on something they do day in and out: writing code. And the more they write, the better their performance is. Right?</p>

<p>It seems to be a no-brainer: if you write a lot of code, surely you are very productive and, by extension, also a very capable programmer.</p>

<p>Furthermore, if you wrote 1,000 lines a week on average for the past few weeks, and your colleague wrote only 500 lines while working in the same language &ndash; you work much harder and your colleague is not pulling her weight. Right?</p>

<p>It&rsquo;s not all as clear-cut.</p>

<p>There is no doubt that complex programs require a lot of lines of code. A cursory <a href="http://www.quora.com/How-many-lines-of-code-does-Windows-7-have">internet search</a> suggests Windows 7 has 2,085,772 lines of code, although I am sure that can be much improved upon if re-written from scratch; but not even the most capable programmer can convert it into 2,000 lines of code.</p>

<p>It is obvious that a program that has several million lines of code is much more complex than that that has several thousands. But for the same complexity level, is it better to have more code?</p>

<p>So far, most of my own Ruby code refactoring &ndash; once I got past the &lsquo;Hello, World&rsquo; stage - involved abbreviating number of lines of code once I got the program to work (outside of maybe using modules, but even then, I probably end up with fewer lines of codes on a net-net basis).</p>

<p>My current steep learning code means that sometimes I see a new method and realize I should have used that on a lab from a week ago, so I go in and apply it, which usually results in fewer lines of code:</p>

<p><img class="center" src="/images/factorial.png"></p>

<p><img class="center" src="/images/FactorialTernary.png"></p>

<p><img class="center" src="/images/inject.png"></p>

<p>Why go and create a custom factorial method if one can just use &lsquo;inject&rsquo;?</p>

<p>So to me, a metric of learning performance has been being able to remove code and replace it with something more efficient and elegant that does not take away from the program&rsquo;s performance.</p>

<p>I stumbled upon a relevant E.W. Dijkstra&rsquo;s quote when researching the topic; It was featured in his 1988 paper <a href="https://www.cs.utexas.edu/~EWD/transcriptions/EWD10xx/EWD1036.html">&lsquo;On the Cruelty of Really Teaching Computer Science&rsquo;</a>:</p>

<blockquote><p>&ldquo;&hellip; [there] is only a small step to measuring "programmer productivity&rdquo; in terms of &ldquo;number of lines of code produced per month&rdquo;. This is a very costly measuring unit because it encourages the writing of insipid code [&hellip;]</p>

<p>My point today is that, if we wish to count lines of code, we should not regard them as &ldquo;lines produced&rdquo; but as &ldquo;lines spent&rdquo;: the current conventional wisdom is so foolish as to book that count on the wrong side of the ledger."</p></blockquote>

<p>I will leave you with another quote by Bill Gates:</p>

<blockquote><p>Measuring programming progress by lines of code is like measuring aircraft building progress by weight.</p></blockquote>

<p>Don&rsquo;t waste your code &ndash; write it succinctly.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/06/14/elegance-of-code-part-i/">Elegance of Code Part I</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-06-14T00:00:00-04:00" pubdate data-updated="true">Jun 14th, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>When one first starts coding, the main concern is writing something that works and produces desired result.</p>

<p>You get irb to output &ldquo;Hello World!&rdquo; &ndash; excellent. Then you get a nested hash-array monster to return a very specific key hidden 7 levels deep &ndash; great. Then you write your CLI interface that runs in your command line and shows scraped data from your fellow students' bio &ndash; good job. And you even use cowsay to format interactions with the user and format command line output using escape sequences, so that user interface looks less boring. And when you hit rspec, most tests pass.</p>

<p>And then the next task comes &ndash; how do you make your actual code look good?</p>

<blockquote><p>“Code so beautiful that tears are shed.”</p></blockquote>

<p><em>Why’s Poignant Guide to Ruby</em></p>

<p>So how do you write code that indeed is so beautiful and elegant that tears will be shed by those reading your pull request?</p>

<p>There are multiple parts to the puzzle, but let&rsquo;s start with aesthetics of formatting first.</p>

<p>Do you remember when Avi said that he had been looking at our code, and we all needed to abide by basic indentation and not leave not-working code bits floating around commented out?</p>

<p>Ruby is perfectly fine with reading your code without any and all indentations and any real formatting. It can easily ignore all the hashed-out random comments. But once the code we read and write gets more and more complex, us humans really benefit from proper formatting to figure out what goes where &ndash; especially when the code is revisited at a later point and no one remembers anymore what it was really supposed to do.</p>

<p>To use proper formatting is also kind to anyone who might work on the code after you, so that they won&rsquo;t have to spend hours doing forensic coding and figuring out what end statement closes what block.</p>

<p>And it is simply and elegant thing to do. And it&rsquo;s Step 1 to Writing Elegant Code.</p>

<p>You know how when you went to college you had to format your essay footnotes a very specific way using a style manual or a helpful website or two? Well, there is a Ruby style manual, too!</p>

<p><a "href=https://github.com/airbnb/ruby">The Airbnb Ruby Style Guide</a> is what I suggest as a reference for all the formatting questions that are keeping you up at night.(Airbnb website is in Ruby and Ruby on Rails by the way &ndash; see, real companies use it!)</p>

<p> It is is a very comprehensive but not excessively lengthy GitHub repo that will answer most of the questions you have ever had about, say, indenting when and case together — turns out they are supposed to be indented at the same level! (That means if I re-visit some earlier labs, cosmetic edits will need to be made.) The best part if, anyone is welcome to contribute and submit a pull request &ndash; and maybe your take on comment indentation will be shared with the next generation of newbie developers.</p>

<p>Now, if there was only a website that did my Ruby code formatting for me&hellip;</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/06/09/beautifying-non-working-blog-posts/">Beautifying Non-Working Blog Posts</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-06-09T22:02:40-04:00" pubdate data-updated="true">Jun 9th, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Avi said on Day 1 of Flatiron School: don&rsquo;t fix non-functioning code. But how about editing a non-working blog post?</p>

<p>I had a post all written up and ready to go. It was about ways to iterate over arrays and had several A4 pages' worth of text (come to think of it, it’s a good thing that post did not happen).</p>

<p>I did some edits on it over the weekend, polishing my style, planning my fancy markup, and inserting clever programmer jokes  (“Make me a sandwich” “No” “Sudo make me a sandwich” “Sure”).</p>

<p>All I had to do was set up Octopress and deploy it, which I conveniently postponed until the night before it was due. Because what could go wrong?</p>

<p>Many things, as it turned out.</p>

<p>I think I was the only person in my cohort (are there 27 of us? seems that we never did a headcount) who had issues setting up GitHub pages.</p>

<p>While everyone seemed to have their nice and shiny parts of cyberspace in which to share their musings with the outside world, mine never allowed me deploy the mandatory &ldquo;hello world&rdquo; post.</p>

<p>Several hours of feverish stack overflow-ing and tortured troubleshooting later (I would rather solve Hashketball both times all over again), it still wasn&rsquo;t working.</p>

<p>After several more hours of precious instructor time (thank you, Rose!), we all threw our hands in the air, rm -rf'ed existing directories, deleted GitHub repos, and started from scratch. And it worked, ad oculos.</p>

<p>We figured out what happened, but not how. It looks like GitHub Pages gave me setup meant for companies instead of private individuals. Octopress was not enthused about me being Anna Ershova LLC and refused to produce a live page.</p>

<p>But we re-did it from scratch and that fixed it. And by then I had realized that Avi was right. I spent too much time on writing and editing my post, without trying to see if it would even go through. Murphy’s Law dictates that it is the very situation when it wouldn’t.  So instead of using my original post, I am writing this one as a very public note to self to not get caught up in aesthetics of things if I don&rsquo;t even know if they are going to work.</p>

<p>And those dozens of ways to iterate over arrays? Brace yourselves, I&rsquo;ll come back to that.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/06/09/my-first-post-on-octopress/">My First Post on Octopress</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-06-09T19:10:35-04:00" pubdate data-updated="true">Jun 9th, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>&ldquo;hello world&rdquo;</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="1">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
   
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:annaershova.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
  
    <section>
  <ul id="recent_posts">
      <li class="post">
      <a href="http://annaershova.github.io" alt="Home"><img src="/images/Home.png"></a>
      <a href="http://annaershova.github.io/archives/" alt="Archives"><img src="/images/Calendar.png"></a>
      <a href="mailto:anna.ershova@gmail.com" alt="E-Mail"><img src="/images/Envelope.png"></a>
      <a href="http://annaershova.github.io/atom.xml" alt="subscribe feed"><img src="/images/rss_big.png"></a>
      </li>
  </ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/10/12/mac-uptime-and-reboot-stats/">Mac Uptime and Reboot Stats</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/12/updating-os-x-from-your-command-line/">Updating OS X From Your Command Line</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/11/running-edge-rails-living-dangerously/">Running Edge Rails -- Living Dangerously</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/08/08/and-the-new-app-is-done/">And the New App Is Done</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/29/project-mode-week-1/">Project Mode -- Week 1, Day 2</a>
      </li>
    
  </ul>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Anna Ershova -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>



<script>
  $(document).ready(function() {  
    var stickyNavTop = $('nav').offset().top;  
      
    var stickyNav = function(){  
      var scrollTop = $(window).scrollTop(); 
      var navHasClassSticky = $('nav').hasClass('sticky');

      if (scrollTop > stickyNavTop && navHasClassSticky) {   
        return true;
      } else if (scrollTop > stickyNavTop) {
        $('nav').hide();
        $('nav').addClass('sticky');
        $('nav').fadeIn('2000');
      } else {  
        $('nav').removeClass('sticky');   
      }  
    };  
      
    stickyNav();  
      
    $(window).scroll(function() {  
      stickyNav();  
    });  
  });  
</script>


</body>
</html>
